<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Dancing+Script:wght@400;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Enhanced Material 3 Color System */
            --primary: #0d47a1;
            --primary-light: #1976d2;
            --primary-lighter: #42a5f5;
            --on-primary: #ffffff;
            --primary-container: #bbdefb;
            --on-primary-container: #001a33;
            
            --secondary: #0277bd;
            --secondary-light: #03a9f4;
            --secondary-lighter: #4fc3f7;
            --on-secondary: #ffffff;
            --secondary-container: #b3e5fc;
            --on-secondary-container: #001e2b;
            
            --tertiary: #00695c;
            --tertiary-light: #00acc1;
            --tertiary-lighter: #4dd0e1;
            --on-tertiary: #ffffff;
            --tertiary-container: #b2dfdb;
            --on-tertiary-container: #001f1c;
            
            --surface: #fafcff;
            --surface-dim: #f0f4f8;
            --surface-bright: #ffffff;
            --surface-container-lowest: #ffffff;
            --surface-container-low: #f5f9fd;
            --surface-container: #e8f2ff;
            --surface-container-high: #dce9f7;
            --surface-container-highest: #d0e6f2;
            --on-surface: #0f1419;
            --on-surface-variant: #3e4449;
            
            --background: radial-gradient(ellipse at top, #e3f2fd 0%, #e1f5fe 25%, #b3e5fc 50%, #81d4fa 75%, #4fc3f7 100%);
            --background-overlay: linear-gradient(135deg, rgba(224, 247, 250, 0.9) 0%, rgba(179, 229, 252, 0.8) 50%, rgba(129, 212, 250, 0.7) 100%);
            
            /* Enhanced Glass Effects */
            --glass-bg-primary: rgba(255, 255, 255, 0.25);
            --glass-bg-secondary: rgba(255, 255, 255, 0.15);
            --glass-bg-tertiary: rgba(255, 255, 255, 0.35);
            --glass-border: rgba(255, 255, 255, 0.3);
            --glass-border-strong: rgba(255, 255, 255, 0.5);
            --glass-shadow: 0 8px 32px rgba(13, 71, 161, 0.15);
            --glass-shadow-strong: 0 16px 64px rgba(13, 71, 161, 0.25);
            
            /* Premium Gradients */
            --gradient-primary: linear-gradient(135deg, #0d47a1 0%, #1976d2 50%, #42a5f5 100%);
            --gradient-secondary: linear-gradient(135deg, #0277bd 0%, #03a9f4 50%, #4fc3f7 100%);
            --gradient-accent: linear-gradient(135deg, #00695c 0%, #00acc1 50%, #4dd0e1 100%);
            --gradient-celebration: linear-gradient(45deg, #ff6b9d, #c44569, #f8b500, #f0932b, #6c5ce7, #a29bfe);
            
            /* Advanced Elevations */
            --elevation-0: none;
            --elevation-1: 0 1px 3px rgba(13, 71, 161, 0.12), 0 1px 2px rgba(13, 71, 161, 0.08);
            --elevation-2: 0 2px 6px rgba(13, 71, 161, 0.15), 0 1px 4px rgba(13, 71, 161, 0.12);
            --elevation-3: 0 4px 12px rgba(13, 71, 161, 0.18), 0 2px 8px rgba(13, 71, 161, 0.15);
            --elevation-4: 0 8px 24px rgba(13, 71, 161, 0.22), 0 4px 16px rgba(13, 71, 161, 0.18);
            --elevation-5: 0 16px 48px rgba(13, 71, 161, 0.28), 0 8px 32px rgba(13, 71, 161, 0.22);
            
            /* Animation Variables */
            --duration-short: 200ms;
            --duration-medium: 400ms;
            --duration-long: 600ms;
            --duration-extra-long: 1000ms;
            --easing-standard: cubic-bezier(0.2, 0, 0, 1);
            --easing-decelerate: cubic-bezier(0, 0, 0, 1);
            --easing-accelerate: cubic-bezier(0.3, 0, 1, 1);
            --easing-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            scroll-behavior: smooth;
            background: var(--background);
            color: var(--on-surface);
            line-height: 1.6;
            font-optical-sizing: auto;
        }

        /* Advanced Background with Layered Effects */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--background-overlay);
            z-index: -2;
            pointer-events: none;
        }

        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 15% 25%, rgba(13, 71, 161, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 85% 75%, rgba(2, 119, 189, 0.06) 0%, transparent 45%),
                radial-gradient(circle at 50% 50%, rgba(0, 105, 92, 0.04) 0%, transparent 60%),
                conic-gradient(from 0deg at 20% 30%, transparent, rgba(66, 165, 245, 0.03) 60deg, transparent 120deg),
                conic-gradient(from 120deg at 80% 70%, transparent, rgba(79, 195, 247, 0.02) 45deg, transparent 90deg);
            z-index: -1;
            pointer-events: none;
            animation: backgroundShimmer 20s ease-in-out infinite alternate;
        }

        @keyframes backgroundShimmer {
            0% { opacity: 0.6; transform: scale(1) rotate(0deg); }
            50% { opacity: 0.9; transform: scale(1.02) rotate(0.5deg); }
            100% { opacity: 0.7; transform: scale(1.01) rotate(-0.3deg); }
        }

        /* Floating Glass Blobs */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse 200px 150px at 20% 30%, rgba(79, 195, 247, 0.15) 0%, transparent 60%),
                radial-gradient(ellipse 180px 140px at 70% 20%, rgba(129, 212, 250, 0.12) 0%, transparent 65%),
                radial-gradient(ellipse 220px 170px at 80% 70%, rgba(66, 165, 245, 0.1) 0%, transparent 55%),
                radial-gradient(ellipse 160px 120px at 15% 80%, rgba(77, 208, 225, 0.13) 0%, transparent 60%),
                radial-gradient(ellipse 190px 160px at 50% 60%, rgba(3, 169, 244, 0.08) 0%, transparent 70%);
            z-index: -3;
            pointer-events: none;
            animation: floatingBlobs 25s ease-in-out infinite alternate;
        }

        @keyframes floatingBlobs {
            0% { 
                transform: translate(0px, 0px) scale(1); 
                filter: blur(20px);
            }
            25% { 
                transform: translate(30px, -20px) scale(1.1); 
                filter: blur(25px);
            }
            50% { 
                transform: translate(-15px, 25px) scale(0.95); 
                filter: blur(22px);
            }
            75% { 
                transform: translate(25px, 10px) scale(1.05); 
                filter: blur(28px);
            }
            100% { 
                transform: translate(-10px, -15px) scale(1.02); 
                filter: blur(24px);
            }
        }

        /*  Section 1:  Giftbox */
        .section-1 {
            height: 100vh;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .section-1::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 25% 35%, rgba(66, 165, 245, 0.12) 0%, transparent 45%),
                radial-gradient(circle at 75% 65%, rgba(79, 195, 247, 0.10) 0%, transparent 50%),
                radial-gradient(circle at 50% 20%, rgba(77, 208, 225, 0.08) 0%, transparent 55%);
            pointer-events: none;
            animation: sectionAmbience 15s ease-in-out infinite alternate;
        }

        @keyframes sectionAmbience {
            0% { opacity: 0.7; transform: scale(1) rotate(0deg); }
            100% { opacity: 1; transform: scale(1.05) rotate(1deg); }
        }

        .floating-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            background: var(--gradient-secondary);
            animation: premiumParticleFloat 15s ease-in-out infinite;
            filter: blur(1px);
            opacity: 0.6;
            box-shadow: 0 0 20px rgba(79, 195, 247, 0.3);
        }

        @keyframes premiumParticleFloat {
            0%, 100% { 
                transform: translateY(0px) translateX(0px) rotate(0deg) scale(1); 
                opacity: 0.4;
            }
            25% { 
                transform: translateY(-50px) translateX(30px) rotate(90deg) scale(1.2); 
                opacity: 0.8;
            }
            50% { 
                transform: translateY(-80px) translateX(-20px) rotate(180deg) scale(0.8); 
                opacity: 0.6;
            }
            75% { 
                transform: translateY(-100px) translateX(40px) rotate(270deg) scale(1.1); 
                opacity: 0.9;
            }
        }

        /* New Gift Box Design */
        .gift-box-container {
            position: relative;
            z-index: 10;
            cursor: pointer;
        }

        .gift-box-container::before {
            content: "";
            width: 440px;
            height: 440px;
            background: radial-gradient(circle, rgba(79, 195, 247, 0.3) 0%, rgba(129, 212, 250, 0.2) 50%, rgba(66, 165, 245, 0.15) 100%);
            position: absolute;
            z-index: -1;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            animation: glowPulse 3s ease-in-out infinite alternate;
            backdrop-filter: blur(10px);
        }

        @keyframes glowPulse {
            0% { 
                transform: translate(-50%, -50%) scale(1); 
                opacity: 0.6;
            }
            100% { 
                transform: translate(-50%, -50%) scale(1.1); 
                opacity: 0.9;
            }
        }

        .gift-box-body {
            position: relative;
            height: 200px;
            width: 200px;
            margin-top: 123.33px;
            background: var(--gradient-primary);
            border-bottom-left-radius: 15px;
            border-bottom-right-radius: 15px;
            box-shadow: 
                var(--glass-shadow),
                inset 0 4px 8px rgba(255, 255, 255, 0.2);
            border: 2px solid var(--glass-border);
            backdrop-filter: blur(15px);
            transition: all var(--duration-long) var(--easing-bounce);
        }

        .gift-box-body::after {
            content: "";
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.3));
        }

        .gift-box-lid {
            position: absolute;
            z-index: 1;
            left: 50%;
            transform: translateX(-50%);
            bottom: 90%;
            height: 40px;
            width: 220px;
            background: var(--gradient-primary);
            border-radius: 15px;
            box-shadow: 
                var(--glass-shadow),
                inset 0 2px 6px rgba(255, 255, 255, 0.3);
            border: 2px solid var(--glass-border);
            backdrop-filter: blur(15px);
            transition: all 1.2s var(--easing-bounce);
        }

        .gift-box-lid::after {
            content: "";
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.6));
        }

        .gift-bow {
            z-index: 1;
            height: 100%;
        }

        .gift-bow::before, 
        .gift-bow::after {
            content: "";
            width: 83px;
            height: 83px;
            border: 16px solid var(--glass-border-strong);
            border-radius: 50% 50% 0 50%;
            position: absolute;
            bottom: 99%;
            z-index: -1;
            background: var(--gradient-secondary);
            backdrop-filter: blur(10px);
            box-shadow: var(--glass-shadow);
        }

        .gift-bow::before {
            left: 50%;
            transform: translateX(-100%) skew(10deg, 10deg);
        }

        .gift-bow::after {
            left: 50%;
            transform: translateX(0%) rotate(90deg) skew(10deg, 10deg);
        }

        .gift-surprise {
            opacity: 0;
            transform: translateY(0%);
            transition: all 0.8s var(--easing-bounce);
            margin: 0 auto;
            display: block;
            width: 120px;
            height: 120px;
            border-radius: 20px;
            background: var(--gradient-celebration);
            color: white;
            font-size: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--glass-shadow);
            border: 2px solid var(--glass-border);
            backdrop-filter: blur(10px);
        }

        /* Hover Animations */
        .gift-box-container:hover .gift-box-body {
            animation: giftBoxBodyShake 1s forwards ease-in-out;
        }

        .gift-box-container:hover .gift-surprise {
            opacity: 1;
            z-index: 0;
            transform: translateY(-157px);
        }

        .gift-box-container:hover .gift-box-lid {
            animation: giftBoxLidOpen 1s forwards ease-in-out;
        }

        .gift-box-container:hover .gift-bow::before {
            animation: giftBowLeft 1.1s forwards ease-in-out;
        }

        .gift-box-container:hover .gift-bow::after {
            animation: giftBowRight 1.1s forwards ease-in-out;
        }

        @keyframes giftBoxLidOpen {
            0%, 42% {
                transform: translate3d(-50%, 0%, 0) rotate(0deg);
            }
            60% {
                transform: translate3d(-85%, -230%, 0) rotate(-25deg);
            }
            90%, 100% {
                transform: translate3d(-119%, 225%, 0) rotate(-70deg);
            }
        }

        @keyframes giftBoxBodyShake {
            0% {
                transform: translate3d(0%, 0%, 0) rotate(0deg);
            }
            25% {
                transform: translate3d(0%, 25%, 0) rotate(20deg);
            }
            50% {
                transform: translate3d(0%, -15%, 0) rotate(0deg);
            }
            70% {
                transform: translate3d(0%, 0%, 0) rotate(0deg);
            }
        }

        @keyframes giftBowRight {
            0%, 50%, 75% {
                transform: translateX(0%) rotate(90deg) skew(10deg, 10deg);
            }
            90%, 100% {
                transform: translate(-50%, -15%) rotate(45deg) skew(10deg, 10deg);
                box-shadow: var(--glass-shadow);
            }
        }

        @keyframes giftBowLeft {
            0% {
                transform: translateX(-100%) rotate(0deg) skew(10deg, 10deg);
            }
            50%, 75% {
                transform: translate(-50%, -15%) rotate(45deg) skew(10deg, 10deg);
            }
            90%, 100% {
                transform: translateX(-100%) rotate(0deg) skew(10deg, 10deg);
            }
        }

        /*  Section 2:  Letter Card */
        .section-2 {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 80px 20px;
            position: relative;
        }

        .letter-card {
            background: var(--glass-bg-primary);
            backdrop-filter: blur(30px) saturate(1.5);
            border: 2px solid var(--glass-border);
            border-radius: 56px;
            padding: 100px 80px;
            max-width: 900px;
            text-align: center;
            box-shadow: 
                var(--glass-shadow-strong),
                inset 0 2px 8px rgba(255, 255, 255, 0.2);
            transform: translateY(60px);
            opacity: 0;
            animation: premiumLetterReveal 1.6s var(--easing-decelerate) 0.8s forwards;
            position: relative;
            overflow: hidden;
        }

        .letter-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(66, 165, 245, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(79, 195, 247, 0.06) 0%, transparent 45%);
            border-radius: 54px;
            pointer-events: none;
        }

        @keyframes premiumLetterReveal {
            0% {
                transform: translateY(60px) scale(0.95);
                opacity: 0;
            }
            60% {
                transform: translateY(-10px) scale(1.02);
                opacity: 0.8;
            }
            100% {
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        .letter-card h2 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 50px;
            font-weight: 700;
            text-shadow: 0 4px 8px rgba(13, 71, 161, 0.2);
            position: relative;
        }

        .letter-card p {
            font-size: 1.25rem;
            line-height: 1.8;
            color: var(--on-surface);
            margin-bottom: 28px;
            font-weight: 400;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }

        .scroll-hint {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            color: var(--primary);
            font-size: 1.3rem;
            font-weight: 600;
            animation: premiumBounce 2.5s infinite;
            text-shadow: 0 2px 4px rgba(13, 71, 161, 0.2);
        }

        @keyframes premiumBounce {
            0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
            40% { transform: translateX(-50%) translateY(-15px); }
            60% { transform: translateX(-50%) translateY(-8px); }
        }

        /*  Section 3:  Balloon Interface */
        .section-3 {
            min-height: 100vh;
            padding: 100px 20px;
            position: relative;
            overflow: hidden;
        }

        .section-3 h2 {
            text-align: center;
            font-family: 'Playfair Display', serif;
            font-size: 3.2rem;
            background: var(--gradient-secondary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 80px;
            font-weight: 700;
            text-shadow: 0 4px 8px rgba(2, 119, 189, 0.2);
        }

        .balloon-container {
            position: relative;
            width: 100%;
            height: 70vh;
        }

        .balloon {
            position: absolute;
            cursor: pointer;
            transition: all var(--duration-medium) var(--easing-bounce);
            animation: ultraBalloonFloat 12s ease-in-out infinite;
            z-index: 10;
            filter: drop-shadow(var(--elevation-2));
        }

        .balloon:hover {
            transform: scale(1.15) rotate(8deg);
            filter: drop-shadow(var(--elevation-4));
        }

        .balloon-shape {
            width: 130px;
            height: 160px;
            border-radius: 50% 50% 50% 50% / 40% 40% 60% 60%;
            position: relative;
            box-shadow: 
                var(--glass-shadow),
                inset 0 4px 8px rgba(255, 255, 255, 0.3),
                inset 0 -4px 8px rgba(0, 0, 0, 0.1);
            border: 2px solid var(--glass-border);
            backdrop-filter: blur(15px);
            overflow: hidden;
        }

        .balloon-shape::before {
            content: '';
            position: absolute;
            top: 10%;
            left: 20%;
            width: 30%;
            height: 40%;
            background: radial-gradient(ellipse, rgba(255, 255, 255, 0.6) 0%, transparent 70%);
            border-radius: 50%;
            pointer-events: none;
        }

        .balloon-shape::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 12px solid rgba(0, 0, 0, 0.2);
            pointer-events: none;
        }

        /*  balloon gradients with enhanced effects */
        .balloon:nth-child(2) .balloon-shape { 
            background: linear-gradient(145deg, #4fc3f7 0%, #29b6f6 50%, #03a9f4 100%);
        }
        .balloon:nth-child(3) .balloon-shape { 
            background: linear-gradient(145deg, #81c784 0%, #66bb6a 50%, #4caf50 100%);
        }
        .balloon:nth-child(4) .balloon-shape { 
            background: linear-gradient(145deg, #ffb74d 0%, #ffa726 50%, #ff9800 100%);
        }
        .balloon:nth-child(5) .balloon-shape { 
            background: linear-gradient(145deg, #f48fb1 0%, #ec407a 50%, #e91e63 100%);
        }
        .balloon:nth-child(6) .balloon-shape { 
            background: linear-gradient(145deg, #ce93d8 0%, #ba68c8 50%, #9c27b0 100%);
        }

        @keyframes ultraBalloonFloat {
            0% { transform: translateY(0px) translateX(0px) rotate(-2deg); }
            25% { transform: translateY(-40px) translateX(15px) rotate(3deg); }
            50% { transform: translateY(-60px) translateX(-12px) rotate(-1deg); }
            75% { transform: translateY(-45px) translateX(20px) rotate(4deg); }
            100% { transform: translateY(0px) translateX(0px) rotate(-2deg); }
        }

        .balloon-holder {
            position: absolute;
            bottom: 5%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 5;
        }

        .person-image {
            width: 220px;
            height: 330px;
            border-radius: 32px;
            object-fit: cover;
            filter: drop-shadow(var(--elevation-3));
            transition: all var(--duration-medium) var(--easing-standard);
            border: 3px solid var(--glass-border);
        }

        .person-image:hover {
            transform: scale(1.08);
            filter: drop-shadow(var(--elevation-4));
        }

        /* Ultra-Premium Floating Images */
        .floating-image {
            position: absolute;
            border-radius: 32px;
            overflow: hidden;
            cursor: pointer;
            transition: all var(--duration-medium) var(--easing-bounce);
            z-index: 15;
            background: transparent;
            border: none;
            box-shadow: none;
            filter: drop-shadow(0 4px 16px rgba(13, 71, 161, 0.1));
        }

        .floating-image:hover {
            transform: scale(1.12) rotate(5deg);
            filter: drop-shadow(0 8px 32px rgba(13, 71, 161, 0.2));
        }

        .floating-image img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
            background: transparent;
            transition: all var(--duration-medium) var(--easing-standard);
        }

        .float-1 { animation: ultraImageFloat1 14s ease-in-out infinite; }
        .float-2 { animation: ultraImageFloat2 16s ease-in-out infinite; }
        .float-3 { animation: ultraImageFloat3 18s ease-in-out infinite; }
        .float-4 { animation: ultraImageFloat4 15s ease-in-out infinite; }

        @keyframes ultraImageFloat1 {
            0%, 100% { transform: translateY(0px) rotate(0deg) scale(1); }
            25% { transform: translateY(-45px) rotate(3deg) scale(1.05); }
            50% { transform: translateY(-60px) rotate(-2deg) scale(0.95); }
            75% { transform: translateY(-35px) rotate(2deg) scale(1.02); }
        }

        @keyframes ultraImageFloat2 {
            0%, 100% { transform: translateX(0px) translateY(0px) rotate(0deg); }
            25% { transform: translateX(20px) translateY(-35px) rotate(-3deg); }
            50% { transform: translateX(-15px) translateY(-50px) rotate(2deg); }
            75% { transform: translateX(12px) translateY(-20px) rotate(-1deg); }
        }

        @keyframes ultraImageFloat3 {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            33% { transform: translateY(-40px) rotate(4deg); }
            66% { transform: translateY(-55px) rotate(-3deg); }
        }

        @keyframes ultraImageFloat4 {
            0%, 100% { transform: translateY(0px) translateX(0px) rotate(0deg); }
            20% { transform: translateY(-30px) translateX(-12px) rotate(2deg); }
            40% { transform: translateY(-45px) translateX(10px) rotate(-2deg); }
            60% { transform: translateY(-35px) translateX(-8px) rotate(3deg); }
            80% { transform: translateY(-50px) translateX(15px) rotate(-1deg); }
        }

        .message-reveal {
            position: absolute;
            background: var(--glass-bg-tertiary);
            backdrop-filter: blur(25px) saturate(1.8);
            border: 2px solid var(--glass-border-strong);
            border-radius: 32px;
            padding: 32px 40px;
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--on-surface);
            text-align: center;
            box-shadow: 
                var(--glass-shadow-strong),
                inset 0 2px 8px rgba(255, 255, 255, 0.3);
            animation: ultraMessageFloat 6s ease-out forwards;
            opacity: 0;
            transform: scale(0.3);
            z-index: 100;
            max-width: 350px;
            line-height: 1.7;
        }

        @keyframes ultraMessageFloat {
            0% { transform: scale(0.3) translateY(0); opacity: 0; }
            10% { transform: scale(1.15) translateY(-25px); opacity: 0.8; }
            20% { transform: scale(1) translateY(-45px); opacity: 1; }
            80% { transform: scale(1) translateY(-85px); opacity: 1; }
            95% { transform: scale(0.9) translateY(-110px); opacity: 0.5; }
            100% { transform: scale(0.7) translateY(-140px); opacity: 0; }
        }

        /* Section 4:  Final Poem */
        .section-4 {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 100px 20px;
            position: relative;
        }

        .poem-card {
            background: var(--glass-bg-primary);
            backdrop-filter: blur(35px) saturate(1.8);
            border: 3px solid var(--glass-border-strong);
            border-radius: 64px;
            padding: 120px 100px;
            max-width: 1000px;
            text-align: center;
            box-shadow: 
                var(--glass-shadow-strong),
                inset 0 4px 16px rgba(255, 255, 255, 0.25),
                0 0 0 1px rgba(255, 255, 255, 0.1);
            animation: luxuryHeartbeat 5s ease-in-out infinite;
            opacity: 0;
            transform: scale(0.85);
            margin-bottom: 60px;
            position: relative;
            overflow: hidden;
        }

        .poem-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 25% 25%, rgba(66, 165, 245, 0.06) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(79, 195, 247, 0.04) 0%, transparent 45%),
                conic-gradient(from 0deg at 50% 50%, transparent, rgba(255, 255, 255, 0.05), transparent 120deg);
            border-radius: 62px;
            pointer-events: none;
            animation: cardShimmer 12s linear infinite;
        }

        @keyframes cardShimmer {
            0% { transform: rotate(0deg); opacity: 0.3; }
            50% { opacity: 0.6; }
            100% { transform: rotate(360deg); opacity: 0.3; }
        }

        .poem-card.revealed {
            animation: luxuryPoemReveal 1.8s var(--easing-decelerate) forwards, luxuryHeartbeat 5s ease-in-out 1.8s infinite;
        }

        @keyframes luxuryPoemReveal {
            0% {
                opacity: 0;
                transform: scale(0.85) rotateY(-10deg);
            }
            40% {
                opacity: 0.6;
                transform: scale(1.02) rotateY(3deg);
            }
            100% {
                opacity: 1;
                transform: scale(1) rotateY(0deg);
            }
        }

        @keyframes luxuryHeartbeat {
            0%, 100% { transform: scale(1) rotateY(0deg); }
            50% { transform: scale(1.03) rotateY(1deg); }
        }

        .poem-card h2 {
            font-family: 'Dancing Script', cursive;
            font-size: 4rem;
            background: var(--gradient-celebration);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 60px;
            font-weight: 700;
            text-shadow: 0 4px 16px rgba(13, 71, 161, 0.3);
            position: relative;
            z-index: 1;
        }

        .poem-text {
            font-family: 'Dancing Script', cursive;
            font-size: 1.7rem;
            line-height: 1.9;
            color: var(--on-surface);
            margin-bottom: 60px;
            font-weight: 500;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }

        .final-message {
            font-size: 1.6rem;
            background: var(--gradient-secondary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
            font-family: 'Dancing Script', cursive;
            text-shadow: 0 2px 8px rgba(2, 119, 189, 0.2);
            position: relative;
            z-index: 1;
        }

        /*  Continue Button */
        .continue-button {
            background: var(--gradient-primary);
            color: var(--on-primary);
            border: 3px solid var(--glass-border-strong);
            padding: 28px 56px;
            font-size: 1.4rem;
            font-family: 'Playfair Display', serif;
            font-weight: 600;
            border-radius: 40px;
            cursor: pointer;
            box-shadow: 
                var(--glass-shadow-strong),
                inset 0 2px 8px rgba(255, 255, 255, 0.3);
            transition: all var(--duration-medium) var(--easing-bounce);
            opacity: 0;
            transform: translateY(40px);
            backdrop-filter: blur(15px);
            position: relative;
            overflow: hidden;
        }

        .continue-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: all var(--duration-long) var(--easing-standard);
        }

        .continue-button:hover::before {
            left: 100%;
        }

        .continue-button.show {
            animation: luxuryButtonReveal 1s var(--easing-bounce) forwards;
        }

        @keyframes luxuryButtonReveal {
            0% {
                opacity: 0;
                transform: translateY(40px) scale(0.9);
            }
            60% {
                opacity: 0.8;
                transform: translateY(-8px) scale(1.05);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .continue-button:hover {
            transform: translateY(-6px) scale(1.08);
            box-shadow: var(--elevation-5);
            filter: brightness(1.1);
        }

        .continue-button:active {
            transform: translateY(-3px) scale(1.05);
        }

        /*  Celebration Effects */
        .celebration-particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            box-shadow: 0 0 15px currentColor;
        }

        .heart-particle {
            width: 24px;
            height: 22px;
            position: absolute;
            pointer-events: none;
            z-index: 9999;
            filter: drop-shadow(0 0 8px rgba(233, 30, 99, 0.6));
        }

        .heart-particle::before,
        .heart-particle::after {
            content: '';
            width: 12px;
            height: 18px;
            position: absolute;
            left: 12px;
            transform: rotate(-45deg);
            transform-origin: 0 100%;
            border-radius: 12px 12px 0 0;
            background: linear-gradient(45deg, #e91e63, #f06292, #ff4081);
            box-shadow: 0 0 10px rgba(233, 30, 99, 0.4);
        }

        .heart-particle::after {
            left: 0;
            transform: rotate(45deg);
            transform-origin: 100% 100%;
        }

        .star-particle {
            width: 20px;
            height: 20px;
            position: absolute;
            pointer-events: none;
            z-index: 9999;
            background: linear-gradient(45deg, #ffd700, #ffeb3b, #fff176);
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.6));
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
        }

        .diamond-particle {
            width: 18px;
            height: 18px;
            position: absolute;
            pointer-events: none;
            z-index: 9999;
            background: linear-gradient(45deg, #9c27b0, #ba68c8, #ce93d8);
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            filter: drop-shadow(0 0 8px rgba(156, 39, 176, 0.6));
            box-shadow: 0 0 12px rgba(156, 39, 176, 0.4);
        }

        @keyframes ultraCelebrationBurst {
            0% {
                transform: translate(0, 0) rotate(0deg) scale(1);
                opacity: 1;
            }
            15% {
                transform: translate(calc(var(--dx) * 0.3), calc(var(--dy) * 0.3)) rotate(60deg) scale(1.3);
                opacity: 1;
            }
            35% {
                transform: translate(calc(var(--dx) * 0.7), calc(var(--dy) * 0.7)) rotate(150deg) scale(1.1);
                opacity: 0.9;
            }
            65% {
                transform: translate(calc(var(--dx) * 1.3), calc(var(--dy) * 1.3)) rotate(270deg) scale(0.9);
                opacity: 0.6;
            }
            85% {
                transform: translate(calc(var(--dx) * 1.8), calc(var(--dy) * 1.8)) rotate(360deg) scale(0.5);
                opacity: 0.3;
            }
            100% {
                transform: translate(calc(var(--dx) * 2.5), calc(var(--dy) * 2.5)) rotate(450deg) scale(0.2);
                opacity: 0;
            }
        }

        /* Enhanced Responsive Design */
        @media (max-width: 768px) {
            .gift-box-container::before {
                width: 320px;
                height: 320px;
            }

            .gift-box-body {
                width: 160px;
                height: 160px;
                margin-top: 100px;
                border-radius: 12px;
            }

            .gift-box-lid {
                width: 180px;
                height: 32px;
                border-radius: 12px;
            }

            .gift-bow::before, 
            .gift-bow::after {
                width: 65px;
                height: 65px;
                border-width: 12px;
            }

            .gift-surprise {
                width: 90px;
                height: 90px;
                font-size: 36px;
                border-radius: 15px;
            }

            .letter-card {
                padding: 60px 40px;
                margin: 0 20px;
                border-radius: 40px;
            }

            .letter-card h2 {
                font-size: 2.8rem;
            }

            .section-3 h2 {
                font-size: 2.5rem;
            }

            .balloon-shape {
                width: 100px;
                height: 125px;
            }

            .person-image {
                width: 220px;
                height: 330px;
            }

            .poem-card {
                padding: 60px 40px;
                margin: 0 20px 50px;
                border-radius: 40px;
            }

            .poem-card h2 {
                font-size: 3.2rem;
            }

            .poem-text {
                font-size: 1.4rem;
            }

            .continue-button {
                padding: 24px 48px;
                font-size: 1.3rem;
                border-radius: 32px;
            }

            .floating-image {
                border-radius: 24px;
            }

            .message-reveal {
                border-radius: 24px;
                padding: 24px 32px;
                max-width: 280px;
            }
        }

        @media (max-width: 480px) {
            .gift-box-container::before {
                width: 280px;
                height: 280px;
            }

            .gift-box-body {
                width: 140px;
                height: 140px;
                margin-top: 80px;
            }

            .gift-box-lid {
                width: 160px;
                height: 28px;
            }

            .gift-surprise {
                width: 80px;
                height: 80px;
                font-size: 32px;
            }

            .letter-card {
                padding: 40px 25px;
                border-radius: 32px;
            }

            .letter-card h2 {
                font-size: 2.4rem;
            }

            .letter-card p {
                font-size: 1.1rem;
            }

            .poem-card {
                padding: 40px 25px;
                border-radius: 32px;
            }

            .poem-card h2 {
                font-size: 2.8rem;
            }

            .poem-text {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div id="celebration-layer" style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;"></div>

    <!-- Section 1: Ultra-Modern Giftbox -->
    <section class="section-1" id="section1">
        <div class="floating-particles"></div>
        
        <div class="gift-box-container" onclick="openGiftbox()" id="giftbox">
            <div class="gift-box-body">
                <div class="gift-surprise">🎁</div>
                <div class="gift-box-lid">
                    <div class="gift-bow"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 2: Premium Letter Card -->
    <section class="section-2" id="section2" style="display: none;">
        <div class="letter-card">
            <h2>एक ख़ास संदेश...</h2>
            <p>Hii... 🤗🤗🤗🤗🤗</p> 
            <p>Happy Birthday! I know abhi tak tum kaafi baar "happy birthday" ke messages padh chuki hogi... but 😅 ab kya kare... message bhi bhej sakta tha... but then I thought... tum simple ho kya? 😏🎈</p> 
            <p>Birthday hai tumhara... aur main kaafi door... na milne ka chance hai, na koi gift dena ka... par bina kuch kiye rehna bhi theek nahi 😤</p> 
            <p>😅 Thoda bahut coding ka gyaan hai... aur jo bhi ye page mein tum dekh rahi ho... banane mein thoda time laga, thoda dimag bhi 🧠💻 but I do hope this made you smile at least a little bit 🙂</p> 
            <p>Baaki sab fir kabhi... ig. Aur ha, end mein maine thodi lines likhi hain (I hope cringe na lage)... but agar tumhe 1% bhi acha laga, toh worth it tha 😌</p> 
            <p>And yeah... have a really, really nice day 😇🌸</p> 
            <p>~ the <em>*idiot*</em>  behind this page 😎</p>
        </div>
        <div class="scroll-hint">⬇️ Scroll down</div>
    </section>

    <!-- Section 3: Ultra-Premium Balloon Interface -->
    <section class="section-3" id="section3" style="display: none;">
        <h2>Burst the Balloons...(click them)</h2>
        <div class="balloon-container" id="balloonContainer">
        </div>
    </section>

    <!-- Section 4: Luxury Final Poem -->
    <section class="section-4" id="section4" style="display: none;">
        <div class="poem-card" id="poemCard">
            <h2>आपके लिए...</h2>
            <div class="poem-text" id="poemText">
            </div>
            <div class="final-message">Happy Birthday, Diya ヾ(≧▽≦*)o ✨</div>
        </div>
        <button class="continue-button" id="continueBtn" onclick="handleContinue()">
            Cake dekhna chaahogi?
        </button>
    </section>

    <script>
        // Global Variables
        let poppedBalloons = 0;
        const totalBalloons = 5;
        const balloonMessages = [
            "Khushiyo ki barsaat ho tum par har baar, Janamdin tumhara bane ek tyohar. 🎉",
            "Har khushi ho tumhare paas, Khuda na kare tumhe kabhi udaas. 🙏",
            "Janamdin ho tumhara lajawab, Har sapna ho tumhara poora bina kisi sawaal-jawaab. 🎂",
            "Muskaan bani rahe tumhari pehchaan, Har din ho tumhari ek nayi udaan. 😊",
            "Har kadam par ho tumhara gyaan, Aur raaste bane tumhara aasaan. 🌼"
        ];

        // Images/gifs 
        const floatingImages = [
            'emoji (1).gif',
            'emoji (2).gif',
            'emoji (3).gif',
            'emoji (4).gif',
            'emoji (5).gif',
            'emoji (6).gif'
        ];

        // Initialize ultra-premium floating particles
        function createFloatingParticles() {
            const container = document.querySelector('.floating-particles');
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                
                // Ultra-premium particle sizes with more variety
                const size = Math.random() * 8 + 4;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 15 + 's';
                particle.style.animationDuration = (12 + Math.random() * 10) + 's';
                container.appendChild(particle);
            }
        }

        // Create ultra-premium celebration effects
        function createUltraCelebration() {
            const shapes = ['circle', 'heart', 'star', 'diamond'];
            const totalParticles = 80;
            
            for (let i = 0; i < totalParticles; i++) {
                setTimeout(() => {
                    const shape = shapes[Math.floor(Math.random() * shapes.length)];
                    let particle;
                    
                    if (shape === 'heart') {
                        particle = document.createElement('div');
                        particle.className = 'heart-particle';
                    } else if (shape === 'star') {
                        particle = document.createElement('div');
                        particle.className = 'star-particle';
                    } else if (shape === 'diamond') {
                        particle = document.createElement('div');
                        particle.className = 'diamond-particle';
                    } else {
                        particle = document.createElement('div');
                        particle.className = 'celebration-particle';
                        const size = Math.random() * 15 + 10;
                        particle.style.width = size + 'px';
                        particle.style.height = size + 'px';
                        particle.style.borderRadius = '50%';
                        
                        // Ultra-premium circle gradients
                        const circleGradients = [
                            'linear-gradient(45deg, #0d47a1, #1976d2, #42a5f5)',
                            'linear-gradient(45deg, #0277bd, #03a9f4, #4fc3f7)',
                            'linear-gradient(45deg, #00695c, #00acc1, #4dd0e1)',
                            'linear-gradient(45deg, #e91e63, #f06292, #ff4081)',
                            'linear-gradient(45deg, #9c27b0, #ba68c8, #ce93d8)',
                            'linear-gradient(45deg, #ff9800, #ffb74d, #ffc947)'
                        ];
                        particle.style.background = circleGradients[Math.floor(Math.random() * circleGradients.length)];
                    }
                    
                    particle.style.position = 'fixed';
                    particle.style.left = '48.5%';
                    particle.style.top = '43%';
                    particle.style.pointerEvents = 'none';
                    particle.style.zIndex = '9999';
                    
                    // Enhanced burst pattern for more spectacular effect
                    const angle = (i * 4.5) * Math.PI / 180;
                    const distance = 180 + Math.random() * 250;
                    const dx = Math.cos(angle) * distance;
                    const dy = Math.sin(angle) * distance;
                    
                    particle.style.setProperty('--dx', dx + 'px');
                    particle.style.setProperty('--dy', dy + 'px');
                    particle.style.animation = 'ultraCelebrationBurst 4s ease-out forwards';
                    particle.style.animationDelay = Math.random() * 0.4 + 's';
                    
                    document.getElementById('celebration-layer').appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 5000);
                }, i * 25);
            }
        }

        // Create  rising balloons
        function createUltraRisingBalloons() {
            const balloonColors = [
                'linear-gradient(145deg, #1976d2, #2196f3)',
                'linear-gradient(145deg, #0288d1, #03a9f4)',
                'linear-gradient(145deg, #0097a7, #4fc3f7)',
                'linear-gradient(145deg, #e91e63, #f06292)',
                'linear-gradient(145deg, #9c27b0, #ba68c8)'
            ];
            
            for (let i = 0; i < 12; i++) {
                setTimeout(() => {
                    const balloon = document.createElement('div');
                    balloon.style.position = 'fixed';
                    balloon.style.bottom = '-100px';
                    balloon.style.left = (10 + Math.random() * 80) + '%';
                    balloon.style.width = '40px';
                    balloon.style.height = '55px';
                    balloon.style.background = balloonColors[Math.floor(Math.random() * balloonColors.length)];
                    balloon.style.borderRadius = '50% 50% 50% 50% / 60% 60% 40% 40%';
                    balloon.style.border = '1px solid rgba(255, 255, 255, 0.3)';
                    balloon.style.boxShadow = '0 4px 16px rgba(25, 118, 210, 0.3)';
                    balloon.style.animation = 'ultraBalloonRise 6s ease-out forwards';
                    balloon.style.zIndex = '999';
                    balloon.style.backdropFilter = 'blur(5px)';
                    
                    const keyframes = `
                        @keyframes ultraBalloonRise {
                            0% { 
                                transform: translateY(0) rotate(0deg) scale(1); 
                                opacity: 1; 
                            }
                            25% {
                                transform: translateY(-25vh) rotate(45deg) scale(1.1);
                                opacity: 0.9;
                            }
                            50% { 
                                transform: translateY(-60vh) rotate(135deg) scale(1.05); 
                                opacity: 0.8; 
                            }
                            75% {
                                transform: translateY(-90vh) rotate(270deg) scale(0.9);
                                opacity: 0.6;
                            }
                            100% { 
                                transform: translateY(-130vh) rotate(360deg) scale(0.7); 
                                opacity: 0; 
                            }
                        }
                    `;
                    
                    if (!document.querySelector('#ultra-balloon-rise-keyframes')) {
                        const style = document.createElement('style');
                        style.id = 'ultra-balloon-rise-keyframes';
                        style.textContent = keyframes;
                        document.head.appendChild(style);
                    }
                    
                    document.body.appendChild(balloon);
                    
                    setTimeout(() => {
                        balloon.remove();
                    }, 7000);
                }, i * 150);
            }
        }

        // Ultra-premium giftbox opening
        function openGiftbox() {
            const giftbox = document.getElementById('giftbox');
            
            // Create ultra-premium celebration
            createUltraCelebration();
            
            // Show ultra-premium balloons rising
            setTimeout(() => {
                createUltraRisingBalloons();
            }, 1000);
            
            // Transition to letter section with enhanced timing
            setTimeout(() => {
                document.getElementById('section1').style.display = 'none';
                document.getElementById('section2').style.display = 'flex';
                
                setTimeout(() => {
                    document.getElementById('section3').style.display = 'block';
                    createInteractiveBalloons();
                    createFloatingImages();
                }, 4500);
            }, 3500);
        }

        // Create ultra-premium floating images
        function createFloatingImages() {
            const section3 = document.getElementById('section3');
            
            const imagePositions = [
                {left: '4%', top: '50%', animation: 'float-1'},
                {left: '65%', top: '40%', animation: 'float-2'},
                {left: '2%', top: '85%', animation: 'float-3'},
                {left: '70%', top: '80%', animation: 'float-4'},
                {left: '1%', top: '25%', animation: 'float-1'},
                {left: '75%', top: '19%', animation: 'float-3'}
            ];
            
            floatingImages.forEach((imgSrc, index) => {
                if (index < imagePositions.length) {
                    const imageContainer = document.createElement('div');
                    imageContainer.className = `floating-image ${imagePositions[index].animation}`;
                    imageContainer.style.left = imagePositions[index].left;
                    imageContainer.style.top = imagePositions[index].top;
                    imageContainer.style.animationDelay = (index * 2.5) + 's';
                    
                    const img = document.createElement('img');
                    img.src = imgSrc;
                    img.alt = `Floating image ${index + 1}`;
                    
                    img.onload = function() {
                        const naturalWidth = this.naturalWidth;
                        const naturalHeight = this.naturalHeight;
                        
                        let displayWidth, displayHeight;
                        const maxSize = 90;
                        
                        if (naturalWidth > naturalHeight) {
                            displayWidth = Math.min(naturalWidth, maxSize);
                            displayHeight = (naturalHeight * displayWidth) / naturalWidth;
                        } else {
                            displayHeight = Math.min(naturalHeight, maxSize);
                            displayWidth = (naturalWidth * displayHeight) / naturalHeight;
                        }
                        
                        imageContainer.style.width = displayWidth + 'px';
                        imageContainer.style.height = displayHeight + 'px';
                    };
                    
                    img.onerror = function() {
                        imageContainer.style.width = '90px';
                        imageContainer.style.height = '90px';
                        imageContainer.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;height:100%;color:#0d47a1;font-size:36px;">🖼️</div>';
                    };
                    
                    imageContainer.appendChild(img);
                    section3.appendChild(imageContainer);
                }
            });
        }

        // Generate ultra-premium balloon string
        function generateBalloonString(balloonIndex, stringLength) {
            const segments = 30;
            const sag = stringLength * 0.22;
            const windOffset = Math.sin(balloonIndex * 0.5) * 10;
            
            let path = `M 0 0`;
            
            for (let i = 1; i <= segments; i++) {
                const t = i / segments;
                const y = t * stringLength;
                
                const sagAtPoint = sag * Math.sin(t * Math.PI);
                const windAtPoint = windOffset * Math.sin(t * Math.PI * 2.5);
                const x = sagAtPoint + windAtPoint;
                
                if (i === 1) {
                    path += ` Q ${x} ${y / 2} ${x} ${y}`;
                } else {
                    path += ` T ${x} ${y}`;
                }
            }
            
            return path;
        }

        // Create ultra-premium interactive balloons
        function createInteractiveBalloons() {
            const container = document.getElementById('balloonContainer');
            
            // Create person image holder
            const holder = document.createElement('div');
            holder.className = 'balloon-holder';
            holder.innerHTML = `
                <img src="balloonboy.png" 
                     alt="Person holding balloons" 
                     class="person-image"
                     onerror="this.style.background='linear-gradient(145deg, #0d47a1, #1976d2, #42a5f5)'; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTMwIiBoZWlnaHQ9IjE5MCIgdmlld0JveD0iMCAwIDEzMCAxOTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMzAiIGhlaWdodD0iMTkwIiByeD0iMzIiIGZpbGw9InVybCgjZ3JhZGllbnQpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9ImdyYWRpZW50IiB4MT0iMCUiIHkxPSIwJSIgeDI9IjEwMCUiIHkyPSIxMDAlIj4KPHN0b3Agb2Zmc2V0PSIwJSIgc3R5bGU9InN0b3AtY29sb3I6IzBkNDdhMSIvPgo8c3RvcCBvZmZzZXQ9IjUwJSIgc3R5bGU9InN0b3AtY29sb3I6IzE5NzZkMiIvPgo8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiM0MmE1ZjUiLz4KPC9saW5lYXJHcmFkaWVudD4KPC9kZWZzPgo8dGV4dCB4PSI2NSIgeT0iOTUiIGZvbnQtZmFtaWx5PSJJbnRlciIgZm9udC1zaXplPSI0OCIgZmlsbD0id2hpdGUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPvCfkZo8L3RleHQ+Cjwvc3ZnPg=='">
            `;
            container.appendChild(holder);
            
            // Enhanced balloon positions for better visual balance
            const positions = [
                {left: '18%', top: '12%'},
                {left: '38%', top: '8%'},
                {left: '62%', top: '10%'},
                {left: '78%', top: '15%'},
                {left: '28%', top: '22%'}
            ];
            
            positions.forEach((pos, index) => {
                const balloon = document.createElement('div');
                balloon.className = 'balloon';
                balloon.style.left = pos.left;
                balloon.style.top = pos.top;
                balloon.style.animationDelay = (index * 1.2) + 's';
                balloon.style.zIndex = '20';
                
                const balloonRect = {
                    left: parseFloat(pos.left),
                    top: parseFloat(pos.top)
                };
                const personRect = { left: 50, top: 85 };
                
                const deltaX = balloonRect.left - personRect.left;
                const deltaY = personRect.top - balloonRect.top;
                const stringLength = Math.sqrt(deltaX * deltaX + deltaY * deltaY) * 8.5;
                
                const stringPath = generateBalloonString(index, stringLength);
                
                balloon.innerHTML = `
                    <div class="balloon-shape"></div>
                    <div class="balloon-string">
                        <svg width="1" height="${stringLength + 60}" 
                             style="position: absolute; top: 100%; left: 50%; transform: translateX(-50%); pointer-events: none; overflow: visible;">
                            <defs>
                                <linearGradient id="stringGradient${index}" x1="0%" y1="0%" x2="0%" y2="100%">
                                    <stop offset="0%" style="stop-color:rgba(13, 71, 161, 0.8);stop-opacity:1" />
                                    <stop offset="50%" style="stop-color:rgba(25, 118, 210, 0.6);stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:rgba(66, 165, 245, 0.4);stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <path d="${stringPath}" 
                                  stroke="url(#stringGradient${index})" 
                                  stroke-width="3" 
                                  fill="none" 
                                  stroke-linecap="round"
                                  opacity="0.9"/>
                            <path d="${stringPath}" 
                                  stroke="rgba(255, 255, 255, 0.5)" 
                                  stroke-width="1" 
                                  fill="none" 
                                  stroke-linecap="round"/>
                        </svg>
                    </div>
                `;
                
                balloon.onclick = () => popBalloon(balloon, index);
                container.appendChild(balloon);
            });
        }

        // Enhanced pop balloon function with ultra-premium effects
        function popBalloon(balloon, index) {
            balloon.style.transform = 'scale(0) rotate(270deg)';
            balloon.style.opacity = '0';
            balloon.style.filter = 'blur(4px) brightness(1.5)';
            
            createUltraSparkles(balloon);
            
            setTimeout(() => {
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message-reveal';
                messageDiv.innerHTML = balloonMessages[index];
                messageDiv.style.left = balloon.style.left;
                messageDiv.style.top = balloon.style.top;
                
                document.getElementById('balloonContainer').appendChild(messageDiv);
                
                setTimeout(() => {
                    messageDiv.remove();
                }, 6000);
            }, 500);
            
            poppedBalloons++;
            
            if (poppedBalloons === totalBalloons) {
                setTimeout(() => {
                    showFinalPoem();
                }, 4500);
            }
        }

        // Create ultra-premium sparkles
        function createUltraSparkles(element) {
            const rect = element.getBoundingClientRect();
            const sparkleColors = [
                '#0d47a1', '#1976d2', '#42a5f5', '#03a9f4', '#4fc3f7', '#81c784', 
                '#ffb74d', '#f48fb1', '#ce93d8', '#ffd700'
            ];
            
            for (let i = 0; i < 20; i++) {
                const sparkle = document.createElement('div');
                sparkle.style.position = 'fixed';
                sparkle.style.left = rect.left + rect.width/2 + 'px';
                sparkle.style.top = rect.top + rect.height/2 + 'px';
                sparkle.style.width = (4 + Math.random() * 8) + 'px';
                sparkle.style.height = sparkle.style.width;
                sparkle.style.background = sparkleColors[Math.floor(Math.random() * sparkleColors.length)];
                sparkle.style.borderRadius = '50%';
                sparkle.style.pointerEvents = 'none';
                sparkle.style.zIndex = '1000';
                sparkle.style.boxShadow = '0 0 15px currentColor, inset 0 0 5px rgba(255, 255, 255, 0.5)';
                
                const angle = (i * 18) * Math.PI / 180;
                const distance = 60 + Math.random() * 45;
                const x = Math.cos(angle) * distance;
                const y = Math.sin(angle) * distance;
                
                sparkle.style.animation = `ultraSparkleOut 1.6s ease-out forwards`;
                sparkle.style.setProperty('--x', x + 'px');
                sparkle.style.setProperty('--y', y + 'px');
                
                const keyframes = `
                    @keyframes ultraSparkleOut {
                        0% { 
                            transform: translate(0, 0) scale(1) rotate(0deg); 
                            opacity: 1; 
                        }
                        25% {
                            transform: translate(calc(var(--x) * 0.3), calc(var(--y) * 0.3)) scale(1.3) rotate(180deg);
                            opacity: 1;
                        }
                        50% {
                            transform: translate(calc(var(--x) * 0.7), calc(var(--y) * 0.7)) scale(1.1) rotate(360deg);
                            opacity: 0.8;
                        }
                        100% { 
                            transform: translate(var(--x), var(--y)) scale(0) rotate(720deg); 
                            opacity: 0; 
                        }
                    }
                `;
                
                if (!document.querySelector('#ultra-sparkle-keyframes')) {
                    const style = document.createElement('style');
                    style.id = 'ultra-sparkle-keyframes';
                    style.textContent = keyframes;
                    document.head.appendChild(style);
                }
                
                document.body.appendChild(sparkle);
                
                setTimeout(() => {
                    sparkle.remove();
                }, 1600);
            }
        }

        // Show final poem with enhanced effects
        function showFinalPoem() {
            document.getElementById('section4').style.display = 'flex';
            
            const poemText = balloonMessages.join('<br><br>');
            document.getElementById('poemText').innerHTML = poemText;
            
            setTimeout(() => {
                document.getElementById('poemCard').classList.add('revealed');
                
                setTimeout(() => {
                    document.getElementById('continueBtn').classList.add('show');
                }, 2000);
            }, 1200);
            
            document.getElementById('section4').scrollIntoView({
                behavior: 'smooth'
            });
        }

        // Continue button handler 
        function handleContinue() {
            window.location.href = 'cake_birthday.html';
        }

        // Initialize everything when page loads
        window.onload = function() {
            createFloatingParticles();
        };
    </script>
</body>
</html>